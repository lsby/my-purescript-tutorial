# å®ä¾‹-é€šè®¯å½•-ä¸Š

æœ‰äº†ä¸Šé¢å…³äºç±»å‹å’Œå‡½æ•°çš„ç†è§£, æˆ‘ä»¬åšä¸€ä¸ªé€šè®¯å½•æ¥å±•ç¤ºæ›´å¤šçš„è®¾å®š.

## éœ€æ±‚åˆ†æ

é€šè®¯å½•å°±æ˜¯,è®°å½•äººçš„åœ°å€.

æˆ‘ä»¬å¯ä»¥ç»™é€šè®¯å½•é‡ŒåŠ å…¥ä¸€ä¸ªæ–°çš„è®°å½•, ä¹Ÿå¯ä»¥é€šè¿‡äººåæŸ¥æ‰¾è¿™ä¸ªäººçš„åœ°å€.

## ç±»å‹åˆ«å

æˆ‘ä»¬å…ˆå®šä¹‰ä¸€ä¸ªç±»å‹,è¡¨ç¤ºé€šè®¯å½•ä¸­çš„ä¸€æ¡è®°å½•,å®ƒæœ‰å§“,åå’Œåœ°å€.

```haskell
type Entry =
  { firstName :: String
  , lastName  :: String
  , address   :: Address
  }
```

å…¶ä¸­åœ°å€æ˜¯å¦ä¸€ä¸ªç±»å‹:åŒ…æ‹¬è¡—é“,åŸå¸‚,å›½å®¶.

```haskell
type Address =
  { street :: String
  , city   :: String
  , state  :: String
  }
```

æ¥ä¸‹æ¥,æˆ‘ä»¬å®šä¹‰é€šè®¯å½•,å®ƒæ˜¯"é€šè®¯å½•è®°å½•"ç»„æˆçš„`List`:

```haskell
type AddressBook = List Entry
```

æ‰€ä»¥`type`å…³é”®è¯çš„é€»è¾‘å¾ˆç®€å•,å°±æ˜¯åšä¸€ä¸ªåˆ«å.

æ‰€ä»¥æˆ‘ä»¬å®šä¹‰äº†ä¸‰ä¸ªç±»å‹:

- é€šè®¯å½•è®°å½•: `Entry`
- åœ°å€: `Address`
- é€šè®¯å½•: `AddressBook`

## ä¾èµ–åº“

æ³¨æ„ä¸Šé¢å‡ºç°çš„`List`,è¿™æ˜¯ä¸€ä¸ªç±»å‹.

å¦‚æœä½ æŠŠä¸Šé¢çš„ä»£ç å†™å…¥æ–‡ä»¶,å¦‚æœä»£ç æç¤ºæ­£å¸¸å·¥ä½œ,ä½ ä¼šçœ‹åˆ°Listä¸‹é¢æœ‰çº¢çº¿,å‘Šè¯‰ä½ `Unknown type List`.

åœ¨ä¹‹å‰çš„ç« èŠ‚ä¸­, æˆ‘ä»¬è‡ªå·±å®šä¹‰äº†`List`, ä½†å…¶å®å®˜æ–¹æœ‰å®ç°è¿‡, è¿˜æä¾›äº†ä¸€äº›å¸®åŠ©å‡½æ•°, æˆ‘ä»¬ç›´æ¥å¼•å…¥å°±å¯ä»¥äº†.

åªè¦å»å®ƒçš„åº“å›¾ä¹¦é¦†(https://pursuit.purescript.org)é‡Œæœç´¢ç›¸å…³å…³é”®è¯,å°±å¯ä»¥æ‰¾åˆ°å¯¹åº”çš„åº“,è¿™é‡Œæˆ‘ä»¬æ‰¾åˆ°List:

https://pursuit.purescript.org/packages/purescript-lists/6.0.1

è¿›è€Œæ‰¾åˆ°å®ƒçš„å®‰è£…æ–¹æ³•:

```bash
spago install lists
```

å®‰è£…å®ƒ.ç„¶åç¼–è¯‘ä¸€ä¸‹:

```bash
spago build
```

ç„¶ååœ¨æ–‡ä»¶ä¸­å¼•å…¥è¿™ä¸ªç±»å‹.

```haskell
import Data.List (List)
```

è¿™é‡Œ,`Data.List`æ˜¯æ¨¡å—å,æ‹¬å·é‡Œçš„`List`æ˜¯è¿™ä¸ªæ¨¡å—å¯¼å‡ºçš„ä¸€ä¸ªç±»å‹,æˆ‘ä»¬ç›®å‰åªå¼•å…¥è¿™ä¸ªç±»å‹.

æœ€å,ä½ çš„æ–‡ä»¶çœ‹èµ·æ¥åƒæ˜¯è¿™æ ·:

```haskell
module Main where

import Prelude
import Effect (Effect)
import Effect.Console (log)
import Data.List (List)

type Entry =
  { firstName :: String
  , lastName  :: String
  , address   :: Address
  }

type Address =
  { street :: String
  , city   :: String
  , state  :: String
  }

type AddressBook = List Entry

main :: Effect Unit
main = do
  log "ğŸ"
```

## æ˜¾ç¤ºå‡½æ•°

### æ˜¾ç¤ºåœ°å€

ç°åœ¨,æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥æŠŠ`Address`ç±»å‹è½¬æ¢ä¸ºå­—ç¬¦ä¸², å› ä¸ºåªæœ‰å­—ç¬¦ä¸²æ‰èƒ½è¢«æ‰“å°.

è™½ç„¶ä¹Ÿæœ‰æ›´æ–¹ä¾¿çš„æ–¹æ³•, ä½†ä½œä¸ºæ•™å­¦, æˆ‘ä»¬å…ˆè‡ªå·±å†™.

```haskell
showAddress :: Address -> String
showAddress addr = addr.street <> ", " <> addr.city <> ", " <> addr.state
```

å…¶ä¸­, `addr.street`æ˜¯ä»`addr`è¿™ä¸ªè®°å½•é‡Œå–`street`è¿™ä¸ªè®°å½•, ä¹‹å‰å·²ç»æ¼”ç¤ºè¿‡äº†.

### ä¸­ç¼€è¿ç®—ç¬¦

è€Œ`<>`æ˜¯ä¸€ä¸ª`ä¸­ç¼€è¿ç®—ç¬¦`.

è¿™é‡Œçš„è§„å®šæ˜¯, æˆ‘å¯ä»¥ç»™å‡½æ•°å¯¹åº”ä¸€ä¸ªç¬¦å·. ç„¶åè¿™ä¸ªç¬¦å·å°±æ˜¯ä¸­ç¼€çš„, è€Œå‡½æ•°ä¾ç„¶æ˜¯å‰ç¼€çš„. (å¦‚æœä½ ç†Ÿæ‚‰c++, è¿™å°±æ˜¯è¿ç®—ç¬¦é‡è½½.)

æ¯”å¦‚è¿™é‡Œçš„`<>`,å¯¹åº”çš„å‡½æ•°æ˜¯`append`.å®ƒçš„ä½œç”¨æ˜¯, å­—ç¬¦ä¸²è¿æ¥.

ä¹Ÿå°±æ˜¯è¯´, ä¹Ÿå¯ä»¥å†™æˆè¿™æ ·:

```haskell
showAddress :: Address -> String
showAddress addr = append (append (append (append addr.street ", ") addr.city) ", ") addr.state
```

è¿™æ˜¯å®šä¹‰ä¸­ç¼€ç¬¦å·çš„å†™æ³•:

```haskell
infixr 5 append as <>
```

`infixr`è¡¨ç¤ºå³ç»“åˆ, `5`æ˜¯ä¼˜å…ˆçº§, æ•°å­—è¶Šå¤§ä¼˜å…ˆçº§è¶Šé«˜, æ¥ä¸‹æ¥å°±æ˜¯å‡½æ•°åå­—å’Œç¬¦å·äº†.

ä½ å¯ä»¥åœ¨äº¤äº’æ¨¡å¼é‡Œè¯•è¯•:

```bash
> append "a" "b"
"ab"

> "a" <>  "b"   
"ab"
```

è¿™ä¸¤è€…æ˜¯ç­‰ä»·çš„, åªæ˜¯å†™æ³•ä¸åŒè€Œå·².

é¡ºä¾¿ä¸€æ, ä½ ä¹Ÿå¯ä»¥ç”¨è¿™ç§å½¢å¼æŠŠå‡½æ•°ä¸­ç¼€è°ƒç”¨, æˆ–æŠŠç¬¦å·å‰ç¼€è°ƒç”¨:

```bash
> "a" `append` "b"
"ab"

> (<>) "a" "b"    
"ab"
```

### æ˜¾ç¤ºé€šè®¯å½•æ¡ç›®

åŒæ ·çš„, å†™å‡ºé€šè®¯å½•æ¡ç›®è½¬å­—ç¬¦ä¸²çš„å‡½æ•°:

```haskell
showEntry :: Entry -> String
showEntry entry = entry.lastName <> ", " <> entry.firstName <> ": " <> (showAddress entry.address)
```

ä»–è°ƒç”¨äº†`showAddress`æ¥æ˜¾ç¤ºåœ°å€.

### å®Œæˆ

ç°åœ¨ä½ çš„æ–‡ä»¶é•¿è¿™æ ·:

```haskell
module Main where

import Prelude
import Effect (Effect)
import Effect.Console (log)
import Data.List (List)

type Entry =
  { firstName :: String
  , lastName  :: String
  , address   :: Address
  }

type Address =
  { street :: String
  , city   :: String
  , state  :: String
  }

type AddressBook = List Entry

showEntry :: Entry -> String
showEntry entry = entry.lastName <> ", " <> entry.firstName <> ": " <> showAddress entry.address

showAddress :: Address -> String
showAddress addr = addr.street <> ", " <> addr.city <> ", " <> addr.state

main :: Effect Unit
main = do
  log "ğŸ"

```

## æµ‹è¯•

ç°åœ¨,å…ˆç¼–è¯‘ä¸€ä¸‹:

```bash
spago build
```

ç„¶åè¿›å…¥äº¤äº’æ¨¡å¼, å¼•å…¥`Main`æ¨¡å—:

```bash
> import Main
```

æ¥ä¸‹æ¥, æˆ‘ä»¬æ„é€ æ•°æ®åˆ†åˆ«æµ‹è¯•ä¸€ä¸‹è¿™ä¸¤ä¸ªå‡½æ•°:

```bash
> address = { street: "123 Fake St.", city: "Faketown", state: "CA" }
> showAddress address
"123 Fake St., Faketown, CA"

> entry = { firstName: "John", lastName: "Smith", address: address }
> showEntry entry
"Smith, John: 123 Fake St., Faketown, CA"
```

ok, å®Œç¾è¿è¡Œ.