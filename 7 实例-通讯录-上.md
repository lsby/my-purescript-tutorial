# å®ä¾‹-é€šè®¯å½•-ä¸Š

æœ‰äº†ä¸Šé¢å…³äºç±»å‹å’Œå‡½æ•°çš„ç†è§£, æˆ‘ä»¬åšä¸€ä¸ªé€šè®¯å½•, ä½œä¸ºç»ƒä¹ , ä¹Ÿä»‹ç»æ›´å¤šçš„æŠ€å·§.

## éœ€æ±‚åˆ†æ

é€šè®¯å½•å°±æ˜¯,è®°å½•äººçš„åœ°å€.

æˆ‘ä»¬å¯ä»¥ç»™é€šè®¯å½•é‡ŒåŠ å…¥ä¸€ä¸ªæ–°çš„è®°å½•, ä¹Ÿå¯ä»¥é€šè¿‡äººåæŸ¥æ‰¾è¿™ä¸ªäººçš„åœ°å€.

## ç±»å‹åˆ«å

æˆ‘ä»¬å…ˆå®šä¹‰ä¸€ä¸ªç±»å‹,è¡¨ç¤ºé€šè®¯å½•ä¸­çš„ä¸€æ¡è®°å½•,å®ƒæœ‰å§“,åå’Œåœ°å€.

```haskell
type Entry =
  { firstName :: String
  , lastName  :: String
  , address   :: Address
  }
```

å…¶ä¸­åœ°å€æ˜¯å¦ä¸€ä¸ªç±»å‹:åŒ…æ‹¬è¡—é“,åŸå¸‚,å›½å®¶.

```haskell
type Address =
  { street :: String
  , city   :: String
  , state  :: String
  }
```

æ¥ä¸‹æ¥,æˆ‘ä»¬å®šä¹‰é€šè®¯å½•,å®ƒæ˜¯"é€šè®¯å½•è®°å½•"ç»„æˆçš„List:

```haskell
type AddressBook = List Entry
```

`type`å…³é”®è¯çš„é€»è¾‘å¾ˆç®€å•,å°±æ˜¯åšä¸€ä¸ªåˆ«å.

## ä¾èµ–åº“

æ³¨æ„ä¸Šé¢å‡ºç°çš„`List`,è¿™æ˜¯ä¸€ä¸ªç±»å‹.

å¦‚æœä½ æŠŠä¸Šé¢çš„ä»£ç å†™å…¥æ–‡ä»¶,å¦‚æœä»£ç æç¤ºæ­£å¸¸å·¥ä½œ,ä½ ä¼šçœ‹åˆ°Listä¸‹é¢æœ‰çº¢çº¿,å‘Šè¯‰ä½ `Unknown type List`.

åœ¨ä¹‹å‰çš„ç« èŠ‚ä¸­, æˆ‘ä»¬è‡ªå·±å®šä¹‰äº†`List`, ä½†å…¶å®å®˜æ–¹æœ‰å®ç°è¿‡, ç›´æ¥å¼•å…¥å°±å¯ä»¥äº†.

åªè¦å»å®ƒçš„åº“å›¾ä¹¦é¦†(https://pursuit.purescript.org)é‡Œæœç´¢ç›¸å…³å…³é”®è¯,å°±å¯ä»¥æ‰¾åˆ°å¯¹åº”çš„åº“,è¿™é‡Œæˆ‘ä»¬æ‰¾åˆ°List:

https://pursuit.purescript.org/packages/purescript-lists/6.0.1

è¿›è€Œæ‰¾åˆ°å®ƒçš„å®‰è£…æ–¹æ³•:

```bash
spago install lists
```

å®‰è£…å®ƒ.ç„¶åç¼–è¯‘ä¸€ä¸‹:

```bash
spago build
```

ç„¶ååœ¨æ–‡ä»¶ä¸­å¼•å…¥è¿™ä¸ªç±»å‹.

```haskell
import Data.List (List)
```

è¿™é‡Œ,`Data.List`æ˜¯æ¨¡å—å,æ‹¬å·é‡Œçš„`List`æ˜¯è¿™ä¸ªæ¨¡å—å¯¼å‡ºçš„ä¸€ä¸ªç±»å‹,æˆ‘ä»¬ç›®å‰åªå¼•å…¥è¿™ä¸ªç±»å‹.

æœ€å,ä½ çš„æ–‡ä»¶çœ‹èµ·æ¥åƒæ˜¯è¿™æ ·:

```haskell
module Main where

import Prelude
import Effect (Effect)
import Effect.Console (log)
import Data.List (List)

type Entry =
  { firstName :: String
  , lastName  :: String
  , address   :: Address
  }

type Address =
  { street :: String
  , city   :: String
  , state  :: String
  }

type AddressBook = List Entry

main :: Effect Unit
main = do
  log "ğŸ"
```

## å‡½æ•°

ç°åœ¨,æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥æ˜¾ç¤ºä¸€ä¸ª`Entry`ç±»å‹çš„æ•°æ®.

```haskell
showEntry :: Entry -> String
showEntry entry = entry.lastName <> ", " <> entry.firstName <> ": " <> (showAddress entry.address)
```

å…ˆçœ‹æœ€åçš„`showAddress entry.address`,å…¶ä¸­`entry.address`æ˜¯ä»`entry`é‡Œè®¿é—®`address`éƒ¨åˆ†.

è€Œå‰é¢çš„`showAddress`åˆ™æ˜¯ä¸ªå‡½æ•°,ä»–ä»¬ä¸­é—´æœ‰ä¸€ä¸ªç©ºæ ¼.æ•´ä¸ªè¿èµ·æ¥è¡¨ç¤º:"ä»¥`entry.address`ä¸ºå‚æ•°è°ƒç”¨å‡½æ•°`showAddress`".

(`showAddress`å‡½æ•°çš„å®šä¹‰ç¨åå†å†™).

å¦‚æœå‡½æ•°æœ‰å¤šä¸ªå‚æ•°, å°±å¯ä»¥å†™`<å‡½æ•°å> <å‚æ•°1> <å‚æ•°2> ...`è¿™æ ·.

å› ä¸ºå‡½æ•°çš„æŸ¯é‡ŒåŒ–, è¿™å¯ä»¥ç†è§£ä¸º, ç»™å¤šå‚å‡½æ•°è¾“å…¥ç¬¬ä¸€ä¸ªå‚æ•°å, å®ƒè¿”å›äº†ä¸€ä¸ªå‡½æ•°, ç¬¬äºŒä¸ªå‚æ•°æ˜¯è¾“å…¥ç»™å®ƒè¿”å›çš„è¿™ä¸ªæ–°å‡½æ•°çš„...

ç‰¹åˆ«çš„, å¦‚æœå‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°, å¯ä»¥ç”¨"ä¸­ç¼€è¡¨è¾¾å¼"æ¥æ›´è‡ªç„¶çš„è¡¨è¾¾.æ¯”å¦‚`+ 1 2`å’Œ`1 + 2`,æ˜¾ç„¶æ˜¯åè€…æ›´åŠ è‡ªç„¶å˜›.

è¿™é‡Œçš„è§„å®šæ˜¯, æˆ‘å¯ä»¥ç»™å‡½æ•°å¯¹åº”ä¸€ä¸ªç¬¦å·. ç„¶åè¿™ä¸ªç¬¦å·å°±æ˜¯ä¸­ç¼€çš„, è€Œå‡½æ•°ä¾ç„¶æ˜¯å‰ç¼€çš„. (å¦‚æœä½ ç†Ÿæ‚‰c++, è¿™å°±æ˜¯è¿ç®—ç¬¦é‡è½½.)

æ¯”å¦‚è¿™é‡Œçš„`<>`,å¯¹åº”çš„å‡½æ•°æ˜¯`append`.å®ƒçš„ä½œç”¨æ˜¯, å­—ç¬¦ä¸²è¿æ¥.

è¿™æ˜¯å®šä¹‰ä¸­ç¼€ç¬¦å·çš„å†™æ³•:

```haskell
infixr 5 append as <>
```

`infixr`è¡¨ç¤ºå³ç»“åˆ, `5`æ˜¯ä¼˜å…ˆçº§, æ•°å­—è¶Šå¤§ä¼˜å…ˆçº§è¶Šé«˜, æ¥ä¸‹æ¥å°±æ˜¯å‡½æ•°åå­—å’Œç¬¦å·äº†.

ä½ å¯ä»¥åœ¨äº¤äº’æ¨¡å¼é‡Œè¯•è¯•:

```bash
> append "a" "b"
"ab"

> "a" <>  "b"   
"ab"
```

è¿™ä¸¤è€…æ˜¯ç­‰ä»·çš„, åªæ˜¯å†™æ³•ä¸åŒè€Œå·².

é¡ºä¾¿ä¸€æ, ä½ ä¹Ÿå¯ä»¥ç”¨è¿™ç§å½¢å¼æŠŠå‡½æ•°ä¸­ç¼€è°ƒç”¨, æˆ–æŠŠç¬¦å·å‰ç¼€è°ƒç”¨:

```bash
> "a" `append` "b"
"ab"

> (<>) "a" "b"    
"ab"
```

æ€»è€Œè¨€ä¹‹, è¿™é‡Œ

```bash
entry.lastName <> ", " <> entry.firstName <> ": " <> (showAddress entry.address)
```

æ‰€åšçš„, å°±æ˜¯æŠŠ`lastName`å’Œ`firstName`å–å‡ºæ¥, å­—ç¬¦ä¸²æ‹¼æ¥, å†æ‹¼æ¥ä¸Š`showAddress entry.address`çš„ç»“æœ.

é‚£ä¹ˆshowAddressçš„å®šä¹‰ä¹Ÿå·®ä¸å¤š:

```haskell
showAddress :: Address -> String
showAddress addr = addr.street <> ", " <> addr.city <> ", " <> addr.state
```

è¾“å…¥ä¸€ä¸ª`Address`ç±»å‹çš„å€¼, æŠŠä»–çš„`street`,`city`å’Œ`state`å–å‡ºæ¥, å­—ç¬¦ä¸²æ‹¼æ¥.

ç°åœ¨ä½ çš„æ–‡ä»¶é•¿è¿™æ ·:

```haskell
module Main where

import Prelude
import Effect (Effect)
import Effect.Console (log)
import Data.List (List)

type Entry =
  { firstName :: String
  , lastName  :: String
  , address   :: Address
  }

type Address =
  { street :: String
  , city   :: String
  , state  :: String
  }

type AddressBook = List Entry

showEntry :: Entry -> String
showEntry entry = entry.lastName <> ", " <> entry.firstName <> ": " <> showAddress entry.address

showAddress :: Address -> String
showAddress addr = addr.street <> ", " <> addr.city <> ", " <> addr.state

main :: Effect Unit
main = do
  log "ğŸ"

```

## æµ‹è¯•

ç°åœ¨,å…ˆç¼–è¯‘ä¸€ä¸‹:

```bash
spago build
```

ç„¶åè¿›å…¥äº¤äº’æ¨¡å¼, å¼•å…¥`Main`æ¨¡å—:

```bash
> import Main
```

æ¥ä¸‹æ¥, æˆ‘ä»¬æ„é€ æ•°æ®åˆ†åˆ«æµ‹è¯•ä¸€ä¸‹è¿™ä¸¤ä¸ªå‡½æ•°:

```bash
> address = { street: "123 Fake St.", city: "Faketown", state: "CA" }
> showAddress address
"123 Fake St., Faketown, CA"

> entry = { firstName: "John", lastName: "Smith", address: address }
> showEntry entry
"Smith, John: 123 Fake St., Faketown, CA"
```

ok, å®Œç¾è¿è¡Œ.
